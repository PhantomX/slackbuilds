From 1e7a32924b22d1f786b6f490ce8590656f578f91 Mon Sep 17 00:00:00 2001
From: Jeff Layton <jlayton@samba.org>
Date: Fri, 29 Jul 2011 07:12:48 -0400
Subject: [PATCH] mount.cifs: check_newline returns EX_USAGE on error, not -1

Reported-by: Jan Lieskovsky <jlieskov@redhat.com>
Signed-off-by: Jeff Layton <jlayton@samba.org>
---
 mount.cifs.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/mount.cifs.c b/mount.cifs.c
index 107a5a5..aa4581f 100644
--- a/mount.cifs.c
+++ b/mount.cifs.c
@@ -1419,8 +1419,7 @@ static int check_newline(const char *progname, const char *name)
 static int check_mtab(const char *progname, const char *devname,
 		      const char *dir)
 {
-	if (check_newline(progname, devname) == -1 ||
-	    check_newline(progname, dir) == -1)
+	if (check_newline(progname, devname) || check_newline(progname, dir))
 		return EX_USAGE;
 	return 0;
 }
-- 
1.7.6

